HOW TO IMPORT DATA INTO CMAP

To import your data into the CMAP application, you will need to do the
following:

1)  FORMAT YOUR DATA

Create a tab-delimited file with the following fields and datatypes:

    map_name: character(64) REQUIRED 
        The name of the map (AKA "linkage group," "chromosome," etc.).

    map_accession_id: character(20)
        The accession ID of the map.

    map_start: double(8,2)
        The start position of the map.

    map_stop: double(8,2)
        The stop position of the map.

    feature_accession_id: character(20)
        The accession ID of the feature.

    feature_name: character(32) REQUIRED 
        The name of the feature.

    feature_alt_name: character(32)
        The alternate name of the feature.

    feature_start: double(8,2) REQUIRED 
        The starting position of the feature on the map.

    feature_stop: double(8,2)
        The ending position of the feature on the map.

    feature_type: character(32) REQUIRED 
        The feature's type.

The first line of the file should be the tab-separated names of the
fields in whatever order you're supplying them.  Therefore, the order
of fields is not important.  You should use the above names for the
fields, but you can use spaces and capitalization for the column
names, if you like, as spaces will be converted to underscores and the
names lowercased (e.g. "Feature Alt Name" instead of
"feature_alt_name").

If the fields "map_start" and "map_stop" are not supplied, then the
start and stop positions of the map will be determined after importing
all the features by selecting the MIN and MAX start and stop positions
from the "cmap_feature" table.

2)  CREATE A NEW MAP SET

To create a map set to receive the data, you can either use the
"cmap_admin.pl" tool or the web-base admin tool.  For the first,
simply choose "Create new map set" from the "Main Menu," choose the
type of map and species and provide a name and an abbreviated name.
For the latter, choose "Create New Map Set" from the "Admin Home"
page, fill in the form and hit "Submit."  

NOTE: You'll need to be sure that map types and species are set up
before you can create map sets.  These actions can only be performed
from the web-based admin tool.  Choose "View Map Types" and then
"Create New Map Type" to create a new map type.  Do the same kind of
thing to create your species.

3)  IMPORT DATA

You'll use the "cmap_admin.pl" script to bring in your correctly
formatted data.  Run the script, optionally passing your data file as
an argument, like so:

    $ cmap_admin.pl my_groovy_data.tsv

If you pass a file as an argument, you will be asked to confirm that
that is the file you want to use.  If you answer "no" or did not pass
a file, then you will be asked to locate the file containing your
data.  Type in the path to the file (noticing that you can use tab
completion), or type "q" to exit file selection and return to the
"Main Menu."  Once you've found your file, you'll need to tell the
tool which map set the data corresponds to.  First choose the map type
and then the species of the map set, then the map set itself.  (When
there is only one choice for any of the above, the tool will select
that one and move on.)  Lastly, you will need to confirm your choices.
If all goes well, you should see a lot of lines fly by giving you the
step-by-step progress, the message "Done," and then you will be
returned to the "Main Menu."

4)  MAKE CORRESPONDENCES

The only automated correspondences available currently are name-based,
so if you have a feature named "RG-14" on more than one map,
correspondences will be made among all the maps.  After you import a
new map set, you'll need to run the "Make name-based correspondences"
option from "cmap_admin.pl" to make these correspondences.  When doing
this, you'll need to choose the evidence type to support this
correspondence, so be sure to use the web-based admin tool to create
the evidence by selecting "View Correspondence Evidence Types" and
then "Create New...."  If you like, you can choose to only make
correspondences from one map set to all others.  This is the proper
choice if you have only just imported a new map set.  Not selecting a
map set isn't wrong, however, it just takes longer as ALL the
correspondences will be redone.  As above, you'll need to confirm you
choices before the corrrepondences will be made.

5)  UPDATE CORRESPONDENCE MATRIX (OPTIONAL)

If you perform step #4, then you should run "Reload correspondence
matrix" from "cmap_admin.pl" to refresh the data that is pre-computed
and cached in the "cmap_correspondence_matrix" table.  The only option
is to completely truncate the table and reload it from scratch.

__END__

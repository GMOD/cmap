BEGIN TRANSACTION;

CREATE TABLE cmap_attribute (
  attribute_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  table_name varchar(30) NOT NULL DEFAULT '',
  object_id integer(11) DEFAULT NULL,
  display_order integer(11) DEFAULT '1',
  attribute_name varchar(200) NOT NULL DEFAULT '',
  attribute_value text(65535)
);

CREATE TABLE cmap_correspondence_evidence (
  correspondence_evidence_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  feature_correspondence_id integer(11) NOT NULL DEFAULT '0',
  evidence_type_id integer(11) NOT NULL DEFAULT '0',
  score double(8,2) DEFAULT NULL,
  remark varchar(100) DEFAULT NULL
);

CREATE TABLE cmap_correspondence_lookup (
  feature_id1 integer(11) DEFAULT NULL,
  feature_id2 integer(11) DEFAULT NULL,
  feature_correspondence_id integer(11) DEFAULT NULL
);

CREATE TABLE cmap_correspondence_matrix (
  reference_map_aid varchar(20) NOT NULL DEFAULT '0',
  reference_map_name varchar(32) NOT NULL DEFAULT '',
  reference_map_set_aid varchar(20) NOT NULL DEFAULT '0',
  reference_species_aid varchar(20) NOT NULL DEFAULT '0',
  link_map_aid varchar(20) DEFAULT NULL,
  link_map_name varchar(32) DEFAULT NULL,
  link_map_set_aid varchar(20) NOT NULL DEFAULT '0',
  link_species_aid varchar(20) NOT NULL DEFAULT '0',
  no_correspondences integer(11) NOT NULL DEFAULT '0'
);

CREATE TABLE cmap_dbxref (
  dbxref_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  map_set_id integer(11) DEFAULT NULL,
  feature_type_id integer(11) DEFAULT NULL,
  species_id integer(11) DEFAULT NULL,
  dbxref_name varchar(32) DEFAULT NULL,
  url varchar(200) NOT NULL DEFAULT ''
);

CREATE TABLE cmap_evidence_type (
  evidence_type_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  evidence_type varchar(30) NOT NULL DEFAULT '',
  rank integer(11) NOT NULL DEFAULT '0',
  line_color varchar(20) DEFAULT NULL
);

CREATE TABLE cmap_feature (
  feature_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  map_id integer(11) NOT NULL DEFAULT '0',
  feature_type_id integer(11) NOT NULL DEFAULT '0',
  feature_name varchar(32) NOT NULL DEFAULT '',
  is_landmark tinyint(4) NOT NULL DEFAULT '0',
  start_position double(11,2) NOT NULL DEFAULT '0.00',
  stop_position double(11,2) DEFAULT NULL,
  dbxref_name varchar(32) DEFAULT NULL,
  dbxref_url varchar(200) DEFAULT NULL
);

CREATE TABLE cmap_feature_alias (
  feature_id integer(11) NOT NULL DEFAULT '0',
  alias varchar(255) DEFAULT NULL
);

CREATE TABLE cmap_feature_correspondence (
  feature_correspondence_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  feature_id1 integer(11) NOT NULL DEFAULT '0',
  feature_id2 integer(11) NOT NULL DEFAULT '0',
  is_enabled tinyint(4) NOT NULL DEFAULT '1'
);

CREATE TABLE cmap_feature_type (
  feature_type_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  feature_type varchar(32) NOT NULL DEFAULT '',
  default_rank integer(11) NOT NULL DEFAULT '1',
  shape varchar(12) DEFAULT NULL,
  color varchar(20) DEFAULT NULL,
  drawing_lane integer(11) NOT NULL DEFAULT '1',
  drawing_priority integer(11) NOT NULL DEFAULT '1'
);

CREATE TABLE cmap_map (
  map_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  map_set_id integer(11) NOT NULL DEFAULT '0',
  map_name varchar(32) NOT NULL DEFAULT '',
  display_order integer(11) NOT NULL DEFAULT '1',
  start_position double(11,2) DEFAULT NULL,
  stop_position double(11,2) DEFAULT NULL
);

CREATE TABLE cmap_map_cache (
  pid integer(11) NOT NULL DEFAULT '0',
  slot_no smallint(6) NOT NULL DEFAULT '0',
  map_id integer(11) NOT NULL DEFAULT '0',
  start_position double(11,2) DEFAULT NULL,
  stop_position double(11,2) DEFAULT NULL
);

CREATE TABLE cmap_map_set (
  map_set_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  map_set_name varchar(64) NOT NULL DEFAULT '',
  short_name varchar(30) NOT NULL DEFAULT '',
  map_type_id integer(11) NOT NULL DEFAULT '0',
  species_id integer(11) NOT NULL DEFAULT '0',
  published_on date DEFAULT NULL,
  can_be_reference_map tinyint(4) NOT NULL DEFAULT '1',
  display_order integer(11) NOT NULL DEFAULT '1',
  is_enabled tinyint(4) NOT NULL DEFAULT '1',
  shape varchar(12) DEFAULT NULL,
  color varchar(20) DEFAULT NULL,
  width integer(11) DEFAULT NULL
);

CREATE TABLE cmap_map_type (
  map_type_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  map_type varchar(64) NOT NULL DEFAULT '',
  map_units varchar(12) NOT NULL DEFAULT '',
  is_relational_map tinyint(11) NOT NULL DEFAULT '0',
  shape varchar(12) DEFAULT NULL,
  color varchar(20) DEFAULT NULL,
  width integer(11) DEFAULT NULL,
  display_order integer(11) NOT NULL DEFAULT '1'
);

CREATE TABLE cmap_next_number (
  table_name varchar(40) NOT NULL DEFAULT '',
  next_number integer(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (table_name)
);

CREATE TABLE cmap_species (
  species_id INTEGER PRIMARY KEY NOT NULL DEFAULT '0',
  accession_id varchar(20) NOT NULL DEFAULT '',
  common_name varchar(64) NOT NULL DEFAULT '',
  full_name varchar(64) NOT NULL DEFAULT '',
  display_order integer(11) NOT NULL DEFAULT '1',
  ncbi_taxon_id integer(11) DEFAULT NULL
);

CREATE INDEX feature_correspondence_id_cmap on cmap_correspondence_evidence (feature_correspondence_id, evidence_type_id);
CREATE INDEX feature_id1_cmap_correspondenc on cmap_correspondence_lookup (feature_id1);
CREATE INDEX corr_id_cmap_correspondence_lo on cmap_correspondence_lookup (feature_correspondence_id);
CREATE INDEX feature_name_cmap_feature on cmap_feature (feature_name);
CREATE INDEX feature_id_map_id_cmap_feature on cmap_feature (feature_id, map_id);
CREATE INDEX feature_id_map_id_start_cmap_f on cmap_feature (feature_id, map_id, start_position);
CREATE INDEX map_id_cmap_feature on cmap_feature (map_id);
CREATE INDEX feature_id_cmap_feature_alias on cmap_feature_alias (feature_id, alias);
CREATE INDEX feature_id1_cmap_feature_corre on cmap_feature_correspondence (feature_id1);
CREATE INDEX cmap_feature_corresp_idx_cmap_ on cmap_feature_correspondence (is_enabled, feature_correspondence_id);
CREATE INDEX pid_cmap_map_cache_cmap_map_ca on cmap_map_cache (pid, slot_no, map_id);
CREATE INDEX cmap_map_set_idx_cmap_map_set on cmap_map_set (can_be_reference_map, is_enabled, species_id, display_order, published_on, short_name);
CREATE INDEX acc_id_species_id_cmap_species on cmap_species (accession_id, species_id);
CREATE UNIQUE INDEX B_cmap_correspondence_evidence on cmap_correspondence_evidence (accession_id);
CREATE UNIQUE INDEX B_cmap_evidence_type on cmap_evidence_type (accession_id);
CREATE UNIQUE INDEX C_cmap_evidence_type on cmap_evidence_type (rank);
CREATE UNIQUE INDEX B_cmap_feature on cmap_feature (accession_id);
CREATE UNIQUE INDEX B_cmap_feature_correspondence on cmap_feature_correspondence (accession_id);
CREATE UNIQUE INDEX B_cmap_feature_type on cmap_feature_type (accession_id);
CREATE UNIQUE INDEX B_cmap_map on cmap_map (accession_id);
CREATE UNIQUE INDEX B_cmap_map_set on cmap_map_set (accession_id);
CREATE UNIQUE INDEX B_cmap_map_type on cmap_map_type (map_type);
CREATE UNIQUE INDEX C_cmap_map_type on cmap_map_type (accession_id);
COMMIT;
